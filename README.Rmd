---
output: github_document
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  error = FALSE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  dpi = 300
)
if (!interactive()) {
  options(width = 99)
}
```

# fflr <img src="man/figures/logo.png" align="right" width="120" />

<!-- badges: start -->
[![Lifecycle: experimental][life_badge]][life_link]
[![CRAN status][cran_badge]][cran_link]
[![Codecov test coverage][cov_badge]][cov_link]
![Downloads][dl_badge]
[![R build status][ga_badge]][ga_link]
<!-- badges: end -->

The fflr package is used to query the [ESPN Fantasy Football API][api] for both
the current and prior seasons. Get data on fantasy league members, teams, and
individual athletes.

## Installation

You can install the released version of `fflr` from GitHub with:

```r
# install.packages("remotes")
remotes::install_github("kiernann/fflr")
```

## Usage

The fflr package can be used to scrape team rosters, weekly matchups, draft
pick history, and even calculate the optimal scoring roster.

```{r team_roster}
library(fflr)
rosters <- team_roster(252353, week = 1)
rosters[[5]][, -5]
```

```{r best_roster}
best_roster(rosters[[5]][, -5])
```

```{r league_teams}
(teams <- league_teams(252353))
scores <- weekly_matchups(252353)
```

```{r weekly_matchups, echo=FALSE, fig.width=10, fig.height=5}
library(tidyverse)
scores[1:8, ] %>% 
  left_join(teams) %>% 
  ggplot(aes(x = reorder(abbrev, team), y = score)) +
  geom_col(aes(fill = winner), position = "dodge") +
  scale_fill_brewer(palette = "Set1", guide = FALSE) +
  labs(x = "Team", y = "Score", title = "Week 1 Scores and Match Outcome")
```

***

The fflr project is released with a [Contributor Code of Conduct][coc]. By
contributing to this project, you agree to abide by its terms.

<!-- refs: start -->
[life_badge]: https://img.shields.io/badge/lifecycle-experimental-orange.svg
[life_link]: https://www.tidyverse.org/lifecycle/#experimental
[cran_badge]: https://www.r-pkg.org/badges/version/fflr
[cran_link]: https://CRAN.R-project.org/package=fflr
[ga_badge]: https://github.com/kiernann/fflr/workflows/R-CMD-check/badge.svg
[ga_link]: https://github.com/kiernann/fflr/actions
[cov_badge]: https://img.shields.io/codecov/c/github/kiernann/fflr/master.svg
[cov_link]: https://codecov.io/gh/kiernann/fflr?branch=master
[dl_badge]: https://cranlogs.r-pkg.org/badges/grand-total/fflr
[api]: https://fantasy.espn.com/apis/v3/games/ffl/
[coc]: https://contributor-covenant.org/version/1/0/0/CODE_OF_CONDUCT.html
<!-- refs: end -->
